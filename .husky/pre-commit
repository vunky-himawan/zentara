#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running check (biome/lint)..."
pnpm lint:fix || exit 1

echo "ğŸ”¨ Building project..."
pnpm build || exit 1

echo "ğŸ§ª Checking if unit test files exist..."
if find . -type f \( -name "*.test.ts" -o -name "*.test.tsx" -o -name "*.spec.ts" -o -name "*.spec.tsx" \) | grep -q .; then
  echo "âœ… Unit test files found. Running vitest..."
  pnpm test || exit 1
else
  echo "âš ï¸ No unit test files found. Skipping vitest."
fi
